import 'package:flutter/material.dart';import '../../factory/location_factory.dart';class AllowGetLocationSwitchWidget extends StatefulWidget {  const AllowGetLocationSwitchWidget({super.key});  @override  State<AllowGetLocationSwitchWidget> createState() => _AllowGetLocationSwitchWidgetState();}class _AllowGetLocationSwitchWidgetState extends State<AllowGetLocationSwitchWidget> {  late  bool _enabled;  @override  void initState() {    // TODO: implement initState    super.initState();    _enabled=LocationFactory.to.allowToGetLocation;  }  @override  Widget build(BuildContext context) {    return Container(      color: Colors.white,      child: ListTile(        title: Text("Access location"),        trailing: Switch(value: _enabled, onChanged: (value)async{          if(value){            var re=await LocationFactory.to.firstGetCurrentPosition();            if(re!=null){              await LocationFactory.to.setAllowToGetLocation(value);              setState(() {                _enabled=value;              });            }          }else{            await LocationFactory.to.setAllowToGetLocation(value);            setState(() {              _enabled=value;            });          }        },),      ),    );  }}